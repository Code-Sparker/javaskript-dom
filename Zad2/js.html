<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Licznik Kliknięć — Gra</title>
  <style>
    :root{
      --bg-1:#0f1724;
      --bg-2:#071126;
      --card:#0b1220e6;
      --accent:#8b5cf6;
      --accent-2:#a78bfa;
      --glass:rgba(255,255,255,0.04);
      --muted:rgba(255,255,255,0.7);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
      background:radial-gradient(1000px 600px at 10% 10%,var(--bg-2),transparent),linear-gradient(180deg,var(--bg-1),#020617);
      color:#e6e9ee;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:32px
    }
    .container{
      width:min(980px,96%);
      background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));
      border-radius:18px;
      padding:28px;
      box-shadow:0 10px 30px rgba(2,6,23,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
      display:grid;
      grid-template-columns:320px 1fr;
      gap:24px;
      align-items:start;
      backdrop-filter:blur(6px) saturate(120%);
    }
    .panel{
      background:linear-gradient(180deg,var(--card),rgba(11,18,32,0.6));
      border-radius:12px;
      padding:18px;
      box-shadow:inset 0 1px 0 rgba(255,255,255,0.02);
    }
    .left{display:flex;flex-direction:column;gap:14px}
    .title{font-size:20px;font-weight:600;letter-spacing:0.2px}
    .big-btn{
      --glow:rgba(139,92,246,0.18);
      border-radius:14px;
      padding:20px 24px;
      border:1px solid rgba(139,92,246,0.18);
      background:linear-gradient(180deg,var(--accent),var(--accent-2));
      color:#08060a;
      font-weight:700;
      font-size:18px;
      cursor:pointer;
      box-shadow:0 8px 30px var(--glow),0 2px 6px rgba(0,0,0,0.45);
      transition:transform .12s ease,box-shadow .12s ease,filter .12s ease;
    }
    .big-btn:active{transform:translateY(2px) scale(.997)}
    .stats{display:flex;gap:12px;align-items:center;justify-content:space-between}
    .stat{background:var(--glass);padding:10px;border-radius:10px;flex:1;text-align:center}
    .stat .num{font-size:20px;font-weight:700}
    .controls{display:flex;gap:10px}
    .small-btn{padding:10px 14px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--muted);cursor:pointer;font-weight:600}
    .shop{display:flex;flex-direction:column;gap:8px}
    .shop .item{display:flex;justify-content:space-between;align-items:center;padding:12px;border-radius:10px;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent)}
    .price{font-weight:700;color:var(--accent-2)}
    .message{min-height:36px;color:var(--accent-2);font-weight:600}
    .right{display:flex;flex-direction:column;gap:14px}
    .header{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .progress-wrap{background:rgba(255,255,255,0.04);height:12px;border-radius:999px;overflow:hidden}
    .progress{height:100%;width:0%;background:linear-gradient(90deg,var(--accent),#6ee7b7);transition:width .3s ease}
    .history{display:flex;gap:10px;flex-wrap:wrap}
    .chip{padding:8px 10px;border-radius:999px;background:rgba(255,255,255,0.02);font-size:13px}
    .footer{display:flex;gap:12px;align-items:center;justify-content:space-between}
    .tooltip {
      position: relative;
      cursor: pointer;
      display: inline-block;
    }
    .tooltip .tooltiptext {
      visibility: hidden;
      width: max-content;
      max-width: 240px;
      background-color: #1e1e2f;
      color: #fff;
      text-align: left;
      padding: 8px 10px;
      border-radius: 8px;
      position: absolute;
      z-index: 10;
      bottom: 125%;
      left: 50%;
      transform: translateX(-50%);
      opacity: 0;
      transition: opacity 0.3s;
      font-size: 13px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.4);
      white-space: pre-line;
    }
    .tooltip:hover .tooltiptext {
      visibility: visible;
      opacity: 1;
    }
    @media (max-width:880px){
      .container{grid-template-columns:1fr;}
      .left{order:2}
      .right{order:1}
    }
    .view {
      margin-top: 12px;
      padding: 10px;
      background: var(--glass);
      border-radius: 10px;
      color: var(--muted);
      font-size: 14px;
    }
    table {
      border-collapse: collapse;
      width: 100%;
      color: #e6e9ee;
    }
    th, td {
      padding: 8px 10px;
      border-bottom: 1px solid rgba(255,255,255,0.05);
      text-align: left;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
   #exportRankingBtn,
#importRankingBtn {
  background: linear-gradient(180deg, var(--accent), var(--accent-2));
  border: 1px solid rgba(139, 92, 246, 0.4);
  color: #08060a;
  font-weight: 700;
  font-size: 16px;
  padding: 14px 20px;
  border-radius: 14px;
  cursor: pointer;
  box-shadow: 0 8px 30px rgba(139, 92, 246, 0.18), 0 2px 6px rgba(0, 0, 0, 0.45);
  transition: transform 0.12s ease, box-shadow 0.12s ease, filter 0.12s ease;
  user-select: none;
  margin: 8px 0 8px 8px;
  display: inline-block;
  text-align: center;
}

#exportRankingBtn:hover,
#importRankingBtn:hover {
  filter: brightness(1.1);
  box-shadow: 0 10px 35px rgba(139, 92, 246, 0.3), 0 4px 10px rgba(0, 0, 0, 0.6);
  transform: translateY(-2px) scale(1.02);
}

#exportRankingBtn:active,
#importRankingBtn:active {
  transform: translateY(2px) scale(0.98);
  box-shadow: 0 6px 20px rgba(139, 92, 246, 0.15), 0 1px 3px rgba(0, 0, 0, 0.3);
}

#importFileInput {
  display: none;
}


  </style>
</head>
<body>
  <div class="container">
    <div class="panel left">
      <div class="title">Licznik Kliknięć</div>
      <button id="klik" class="big-btn">Kliknij mnie</button>
      <div class="stats">
        <div class="stat">
          <div class="label">Punkty</div>
          <div id="punkty" class="num">0</div>
        </div>
        <div class="stat">
          <div class="label">Czas</div>
          <div id="czas" class="num">10s</div>
        </div>
      </div>
      <div class="controls">
        <button id="plus" class="small-btn">+1</button>
        <button id="minus" class="small-btn">-1</button>
        <button id="wyzeruj" class="small-btn">Reset</button>
      </div>
      <div class="shop">
        <div class="item">
          <div>
            <div style="font-weight:700">Auto-klikacz</div>
            <div style="font-size:13px;color:var(--muted)">Dodaje 1 pkt/s</div>
          </div>
          <div style="display:flex;align-items:center;gap:8px">
            <div class="price">20</div>
            <button id="kup" class="small-btn">Kup</button>
          </div>
        </div>
        <div id="infoSklep" class="message">Kup auto-klikera za 20 punktów.</div>
      </div>
    </div>
    <div class="panel right">
      <div class="header">
        <div style="font-size:18px;font-weight:700">Twoja sesja</div>
        <div class="chip" id="status">Gotowy</div>
      </div>
      <div>
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px">
          <div style="font-weight:700">Postęp</div>
          <div id="progText" style="font-weight:700">0 / 50</div>
        </div>
        <div class="progress-wrap"><div id="progBar" class="progress"></div></div>
      </div>
      <div>
        <div style="font-weight:700;margin-bottom:8px">Historia akcji</div>
        <div id="logi" class="history"></div>
      </div>
      <div class="footer">
        <div id="komunikat" style="color:var(--accent-2);font-weight:700">Powodzenia!</div>
      </div>

      <div class="panel" style="margin-top:20px;display:flex;flex-direction:column;gap:12px">
        <div style="font-weight:700;font-size:16px">Zapisz wynik do rankingu</div>
        <div style="display:flex;gap:12px;align-items:center;flex-wrap: wrap;">
          <input id="nickInput" type="text" placeholder="Twój nick..." style="flex:1;min-width:140px;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.05);background:rgba(255,255,255,0.03);color:white;font-size:14px;">
          <button id="podgladBtn" class="small-btn">Podgląd</button>
          <button id="zapiszBtn" class="small-btn">Zapisz</button>
        </div>
        <div class="view" id="podgladBox" style="display:none;">
          <div><b>Nick:</b> <span id="podNick"></span></div>
          <div><b>Wynik:</b> <span id="podPkt"></span></div>
          <div><b>Auto-klikacze:</b> <span id="podAuto"></span></div>
        </div>
      </div>
<button id="exportRankingBtn">Eksportuj ranking</button>
<button id="importRankingBtn">Importuj ranking</button>
<input type="file" id="importFileInput" accept=".json" style="display:none" />

      <div class="panel" style="margin-top:20px;overflow-x:auto;">
        <div style="font-weight:700;font-size:16px;margin-bottom:8px">Ranking graczy</div>
        <table id="tabela" style="width:100%;border-collapse:collapse;font-size:14px;table-layout:fixed;">
          <thead>
            <tr style="background:rgba(255,255,255,0.03);text-align:left">
              <th style="padding:10px;border-bottom:1px solid rgba(255,255,255,0.05);width:5%;">#</th>
              <th style="padding:10px;border-bottom:1px solid rgba(255,255,255,0.05);width:45%;">Nick</th>
              <th style="padding:10px;border-bottom:1px solid rgba(255,255,255,0.05);width:25%;">Wynik</th>
              <th style="padding:10px;border-bottom:1px solid rgba(255,255,255,0.05);width:25%;">Auto-klikacze</th>
            </tr>
          </thead>
          <tbody id="rankingBody">
          </tbody>
        </table>
      </div>
    </div>
  </div>

<script>
  let punkty = 0;
  let czas = 10;
  let autoKlikacze = 0;

  let ranking = [];

  const punktyEl = document.getElementById('punkty');
  const czasEl = document.getElementById('czas');
  const klikBtn = document.getElementById('klik');
  const plusBtn = document.getElementById('plus');
  const minusBtn = document.getElementById('minus');
  const wyzerujBtn = document.getElementById('wyzeruj');
  const kupBtn = document.getElementById('kup');
  const infoSklepEl = document.getElementById('infoSklep');
  const statusEl = document.getElementById('status');
  const progBar = document.getElementById('progBar');
  const progText = document.getElementById('progText');
  const logiEl = document.getElementById('logi');
  const komunikatEl = document.getElementById('komunikat');

  const nickInput = document.getElementById('nickInput');
  const podgladBtn = document.getElementById('podgladBtn');
  const zapiszBtn = document.getElementById('zapiszBtn');
  const podgladBox = document.getElementById('podgladBox');
  const podNick = document.getElementById('podNick');
  const podPkt = document.getElementById('podPkt');
  const podAuto = document.getElementById('podAuto');

  const rankingBody = document.getElementById('rankingBody');

  function aktualizujWyswietlanie() {
    punktyEl.textContent = punkty;
    czasEl.textContent = czas + "s";

    let cel = 50;
    progText.textContent = `${punkty} / ${cel}`;
    let procent = Math.min((punkty / cel) * 100, 100);
    progBar.style.width = procent + "%";

    if(czas <= 0){
      statusEl.textContent = "Koniec!";
      klikBtn.disabled = true;
      plusBtn.disabled = true;
      minusBtn.disabled = true;
      kupBtn.disabled = true;
    } else {
      statusEl.textContent = "Gra trwa...";
      klikBtn.disabled = false;
      plusBtn.disabled = false;
      minusBtn.disabled = false;
      kupBtn.disabled = false;
    }
  }

  function dodajLog(tekst) {
    const el = document.createElement('div');
    el.className = 'chip';
    el.textContent = tekst;
    logiEl.prepend(el);
    if(logiEl.children.length > 10) {
      logiEl.removeChild(logiEl.lastChild);
    }
  }

  let autoKlikaczInterval = null;
  function startAutoKlikacz() {
    if(autoKlikaczInterval) return;
    autoKlikaczInterval = setInterval(() => {
      if(czas > 0){
        punkty++;
        aktualizujWyswietlanie();
      }
    }, 1000);
  }
  function stopAutoKlikacz() {
    if(autoKlikaczInterval) {
      clearInterval(autoKlikaczInterval);
      autoKlikaczInterval = null;
    }
  }

  klikBtn.addEventListener('click', () => {
    if(czas <= 0) return;
    punkty++;
    dodajLog("Kliknięcie +1");
    aktualizujWyswietlanie();
  });

  plusBtn.addEventListener('click', () => {
    if(czas <= 0) return;
    punkty++;
    dodajLog("+1");
    aktualizujWyswietlanie();
  });

  minusBtn.addEventListener('click', () => {
    if(czas <= 0) return;
    if(punkty > 0) {
      punkty--;
      dodajLog("-1");
      aktualizujWyswietlanie();
    }
  });

  wyzerujBtn.addEventListener('click', () => {
    punkty = 0;
    autoKlikacze = 0;
    stopAutoKlikacz();
    dodajLog("Reset punktów i auto-klikaczy");
    aktualizujWyswietlanie();
  });

  kupBtn.addEventListener('click', () => {
    if(czas <= 0) return;
    if(punkty >= 20 && autoKlikacze === 0) {
      punkty -= 20;
      autoKlikacze = 1;
      startAutoKlikacz();
      infoSklepEl.textContent = "Kupiony 1 auto-klikacz.";
      dodajLog("Kupiono auto-klikacza");
      aktualizujWyswietlanie();
    } else if(autoKlikacze > 0) {
      infoSklepEl.textContent = "Masz już auto-klikacza.";
    } else {
      infoSklepEl.textContent = "Za mało punktów na auto-klikacza.";
    }
  });

  let timerInterval = setInterval(() => {
    if(czas > 0) {
      czas--;
      aktualizujWyswietlanie();
    } else {
      clearInterval(timerInterval);
      stopAutoKlikacz();
      dodajLog("Koniec gry!");
      komunikatEl.textContent = "Koniec czasu! Możesz zapisać wynik.";
    }
  }, 1000);

  function wyswietlRanking() {
    rankingBody.innerHTML = '';
    ranking.forEach((wpis, idx) => {
      const tr = document.createElement('tr');

      const tdNr = document.createElement('td');
      tdNr.textContent = idx + 1;

      const tdNick = document.createElement('td');
      const tooltip = document.createElement('span');
      tooltip.className = 'tooltip';
      tooltip.textContent = wpis.nick;

      const tooltipText = document.createElement('span');
      tooltipText.className = 'tooltiptext';
      tooltipText.textContent = `Auto-klikacze: ${wpis.autoKlikacze}`;
      tooltip.appendChild(tooltipText);

      tdNick.appendChild(tooltip);

      const tdWynik = document.createElement('td');
      tdWynik.textContent = wpis.wynik;

      const tdAuto = document.createElement('td');
      tdAuto.textContent = wpis.autoKlikacze;

      tr.appendChild(tdNr);
      tr.appendChild(tdNick);
      tr.appendChild(tdWynik);
      tr.appendChild(tdAuto);

      rankingBody.appendChild(tr);
    });
  }

  podgladBtn.addEventListener('click', () => {
    const nick = nickInput.value.trim();
    if(!nick) {
      alert('Podaj nick!');
      return;
    }
    podNick.textContent = nick;
    podPkt.textContent = punkty;
    podAuto.textContent = autoKlikacze;
    podgladBox.style.display = 'block';
  });

  zapiszBtn.addEventListener('click', () => {
    const nick = nickInput.value.trim();
    if(!nick) {
      alert('Podaj nick!');
      return;
    }
    if(punkty === 0) {
      alert('Nie możesz zapisać wyniku 0!');
      return;
    }
    ranking.push({nick: nick, wynik: punkty, autoKlikacze: autoKlikacze});
    ranking.sort((a,b) => b.wynik - a.wynik);
    wyswietlRanking();

    punkty = 0;
    czas = 10;
    autoKlikacze = 0;
    stopAutoKlikacz();
    aktualizujWyswietlanie();
    logiEl.innerHTML = '';
    komunikatEl.textContent = 'Wynik zapisany! Możesz zacząć nową grę.';
    podgladBox.style.display = 'none';
    nickInput.value = '';
  });

  aktualizujWyswietlanie();
  wyswietlRanking();
document.getElementById('exportRankingBtn').addEventListener('click', () => {
  if (ranking.length === 0) {
    alert('Ranking jest pusty, brak danych do eksportu.');
    return;
  }
  const jsonStr = JSON.stringify(ranking, null, 2);
  const blob = new Blob([jsonStr], { type: 'application/json' });
  const url = URL.createObjectURL(blob);

  const a = document.createElement('a');
  a.href = url;
  a.download = 'ranking.json';
  a.click();

  URL.revokeObjectURL(url);
});

document.getElementById('importRankingBtn').addEventListener('click', () => {
  document.getElementById('importFileInput').click();
});

document.getElementById('importFileInput').addEventListener('change', (event) => {
  const file = event.target.files[0];
  if (!file) return;

  const reader = new FileReader();
  reader.onload = (e) => {
    try {
      const importedRanking = JSON.parse(e.target.result);

      if (!Array.isArray(importedRanking)) throw new Error('Nieprawidłowy format pliku.');


      ranking = importedRanking;

      wyswietlRanking();
      localStorage.setItem('ranking', JSON.stringify(ranking));

      alert('Ranking został zaimportowany poprawnie!');
    } catch (err) {
      alert('Błąd podczas importu pliku: ' + err.message);
    }
  };

  reader.readAsText(file);

  event.target.value = '';
});

</script>
</body>
</html>
